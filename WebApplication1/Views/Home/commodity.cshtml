@model IEnumerable<DapperProject.Models.Mobiles>
@{
    ViewBag.Title = "Microsoft Mobiles";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<nav class="navbar navbar-inverse">
    <div class="container-fluid">
       @*  <div class="navbar-header">
            <a class="navbar-brand" href="#">MoBBi99</a>
        </div> *@
        <ul class="nav navbar-nav">

            <li><a href="#">Login</a></li>
            <li><a href="#">Register</a></li>
        </ul>

        <form class="navbar-form navbar-left" action="@Url.Action("Search", "Home")" method="GET">
            <div class="form-group">
                <input type="text" class="form-control" name="query" placeholder="Search">
            </div>
            <button type="submit" class="btn btn-default">Submit</button>
        </form>

        <ul class="nav navbar-nav">
            <li class="active">
                <a href="@Url.Action("Myorder", "AddToCart")" class="btn btn-info btn-lg">
                    <span class="glyphicon glyphicon-shopping-cart" style="color:green"></span>
                    Cart <span class="badge">@ViewBag.Cart</span>
                </a>
            </li>
        </ul>
    </div>
</nav>

<div class="col-md-2">
    <div class="form-group">
        <label for="categoryDropdown">Select Category:</label>
        <select class="form-control" id="categoryDropdown">
            <option value="All">All Categories</option>
            <option value="Fruits">Fruits</option>
            <option value="Tea">Tea</option>
            <!-- Add more options for other categories if needed -->
        </select>
    </div>
</div>

<div class="row">
    <!-- Dropdown for selecting product category -->
    <!-- Products display -->
    @foreach (var m in Model)
    {
        <div class="col-md-4">
            <div class="row">
                <h4><span id="mobilename" style="color:darkred">@m.FruitsName</span></h4>
               @*  <p><span class="glyphicon glyphicon-plus" style="color:red;pointer-events:fill" contextmenu="Added To WishList"></span></p> *@
            </div>

            <p><img src="/lib/Images/@m.Url" style="overflow: hidden; position: relative; width:200px; height:200px;" /></p>

            <a href="@Url.Action("EachProductDetails", "Home", new { m.ProductID})">
                <p class="btn btn-default" href="">View More »</p>
            </a>

            <p><span class="glyphicon glyphicon-shopping-cart" style="color:green"></span></p>
        </div>
    }
</div>

@section scripts {
    <script>
        // Function to filter products by category
        $(document).ready(function () {
            $("#categoryDropdown").change(function () {
                var selectedCategory = $(this).val();
                // Redirect to action with selected category as parameter
                window.location.href = '@Url.Action("commodity", "Home")' + '?category=' + selectedCategory;
            });
        });

        $(document).ready(function () {
            $("form").submit(function (e) {
                e.preventDefault(); // prevent default form submission
                var query = $(this).find("input[name='query']").val().trim();
                if (query !== "") {
                    window.location.href = '@Url.Action("Search", "Home")' + '?query=' + query;
                }
            });
        });
    </script>
}

